# 数据摄取数据源总览

> 最后更新：2026-02 | 文档索引：`docs/README.md`

## 1. 文档定位

本文件整合“数据源分析/发现总结”类文档，作为数据源能力与选型的主文档。

历史来源已归档至 `main/backend/docs/archive/ingest-research/`。

## 2. 数据源分类

### 2.1 官方网站（网页抓取）

示例：

- 州 Lottery 官网
- `powerball.com` 等官方站点

特点：

- 可信度高
- 页面信息丰富
- 但结构易变，历史数据入口可能被前端交互隐藏

### 2.2 API / 开放数据接口

示例：

- 州开放数据 API（如 NY Open Data）
- 第三方数据 API（如 Magayo、LotteryData）

特点：

- 数据结构化、可维护性较好
- 常有 API Key / 配额 / 成本约束

### 2.3 新闻与政策来源

示例：

- Google News
- 政府官网/委员会站点
- 主流媒体站点

特点：

- 适合政策动态与舆情补充
- 清洗成本高（正文抽取、去重、日期提取）

## 3. 历史调研关键发现（提炼）

### 3.1 CA Lottery 页面

- 可提取最新开奖的多类字段（日期、期号、号码、奖级等）
- 页面存在历史数据入口线索（如 “PAST WINNING NUMBERS”）
- 直接调用页面发现的内部接口可能受限（404/上下文限制）

工程结论：

- 适合作为“最新数据补充源”
- 历史批量数据建议结合其他来源

### 3.2 Powerball 官方站点

- 存在历史结果列表与按日期详情页
- 结构相对清晰，适合构建历史回填能力

工程结论：

- 适合全国数据回填与交叉校验

## 4. 选型建议

### 4.1 来源优先级（建议）

1. 官方 API / 开放数据
2. 官方网站结构化页面
3. 第三方 API
4. 第三方网页抓取（兜底）

### 4.2 多源策略

- 保留多源并行能力
- 对关键字段做冲突检测
- 保存来源与抓取时间，支持回溯

## 5. 主要风险

- HTML 结构变化导致选择器失效
- API 配额/授权变化
- 隐藏接口依赖页面上下文（Referer/CORS）
- 字段口径不一致（日期格式、游戏名称、统计范围）

## 6. 与适配器实现的关系

调研结论应沉淀到：

- `app/services/ingest/adapters/*` 具体实现
- 来源优先级与回退规则
- 字段映射/清洗规则
- 回归测试样本

## 7. 维护建议

建议为每个来源维护“来源卡片”：

- 访问方式（网页/API）
- 字段覆盖
- 历史深度
- 更新频率
- 认证要求
- 风险等级

## 8. 历史归档（来源）

- `main/backend/docs/archive/ingest-research/DATA_SOURCES_ANALYSIS.md`
- `main/backend/docs/archive/ingest-research/DATA_SOURCES_FINDINGS.md`

